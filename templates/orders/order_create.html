{% extends 'base.html' %}

{% block title %}Checkout{% endblock %}

{% block content %}
<section class="checkout">
  <div class="checkout-header hero-section rounded-4 mb-4">
    <div class="container">
      <h1 class="mb-1">Checkout</h1>
      <p class="mb-0">Provide your shipping info and review your order before placing it.</p>
    </div>
  </div>

  <div class="checkout-grid">
    <div class="checkout-form card">
      <div class="card-body p-4">
        <h3 class="h5 mb-3">Shipping Information</h3>
        <form method="post" class="checkout-form-inner">
          {% csrf_token %}
          {{ form.as_p }}
          <div class="d-grid d-md-flex gap-2 mt-3">
            <a href="/cart/" class="btn btn-outline-secondary">Back to Cart</a>
            <button type="submit" class="btn btn-primary">Place Order</button>
          </div>
        </form>
      </div>
    </div>

    <aside class="checkout-summary card">
      <div class="card-body p-0">
        <div class="px-4 pt-4 pb-2 border-bottom">
          <h3 class="h5 mb-0">Order Summary</h3>
        </div>
        <ul class="list-group list-group-flush">
          {% for item in cart.items.all %}
          <li class="list-group-item d-flex align-items-center justify-content-between">
            <div class="me-2 text-truncate">
              <div class="fw-semibold text-truncate">{{ item.product.name }}</div>
              <small class="text-muted">Qty: {{ item.quantity }}</small>
            </div>
            <span class="fw-semibold">${{ item.get_cost }}</span>
          </li>
          {% endfor %}
          <li class="list-group-item d-flex justify-content-between fw-bold">
            <span>Total</span>
            <span>${{ cart.get_total_price }}</span>
          </li>
        </ul>
      </div>
    </aside>
  </div>
</section>
{% endblock %}